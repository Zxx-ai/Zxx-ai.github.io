{"title":"vue移动疫情app","slug":"yqapp","date":"2020-02-20T13:06:28.000Z","updated":"2020-02-20T13:06:28.000Z","comments":true,"path":"api/articles/yqapp.json","photos":[],"link":"","excerpt":null,"covers":["https://i.loli.net/2020/02/19/QkD2owRmSeF8bLC.gif"],"content":"<h4 id=\"vue-http-jsonp-HBuilderX写的疫情实时播报app-（打包app）\"><a href=\"#vue-http-jsonp-HBuilderX写的疫情实时播报app-（打包app）\" class=\"headerlink\" title=\"vue+http-jsonp+HBuilderX写的疫情实时播报app （打包app）\"></a>vue+http-jsonp+HBuilderX写的疫情实时播报app （打包app）</h4><p><strong>希望病魔早日消逝</strong></p>\n<p>![29_440CVJJBF_J`5R9Y5PTA.png](<a href=\"https://i.loli.net/2020/02/20/pk25nXRayBsVi4q.png\" target=\"_blank\" rel=\"noopener\">https://i.loli.net/2020/02/20/pk25nXRayBsVi4q.png</a>)</p>\n<p><strong>首先我们先用vue-cli脚手架搭建项目工程</strong><br>关于脚手架我们下章节详细描述</p>\n<p><strong>这里因为拿的是腾讯官方数据的接口</strong><br>url接口: <a href=\"https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5\" target=\"_blank\" rel=\"noopener\">https://view.inews.qq.com/g2/getOnsInfo?name=disease_h5</a></p>\n<p><strong>github代码地址:</strong>     <a href=\"https://github.com/Zxx-ai/yiqing\" target=\"_blank\" rel=\"noopener\">https://github.com/Zxx-ai/yiqing</a></p>\n<h5 id=\"这里有个坑就是，由于我是用rem写的css样式-结果它不支持-于是需要将rem转化成px\"><a href=\"#这里有个坑就是，由于我是用rem写的css样式-结果它不支持-于是需要将rem转化成px\" class=\"headerlink\" title=\"这里有个坑就是，由于我是用rem写的css样式 结果它不支持 于是需要将rem转化成px\"></a>这里有个坑就是，由于我是用rem写的css样式 结果它不支持 于是需要将rem转化成px</h5><p><strong>代码如下：</strong></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(function(designWidth, maxWidth) &#123;</span><br><span class=\"line\">        var doc &#x3D; document,</span><br><span class=\"line\">          win &#x3D; window,</span><br><span class=\"line\">          docEl &#x3D; doc.documentElement,</span><br><span class=\"line\">          remStyle &#x3D; document.createElement(&#39;style&#39;),</span><br><span class=\"line\">          tid</span><br><span class=\"line\"> </span><br><span class=\"line\">        function refreshRem() &#123;</span><br><span class=\"line\">          var width &#x3D; docEl.getBoundingClientRect().width</span><br><span class=\"line\">          maxWidth &#x3D; maxWidth || 540</span><br><span class=\"line\">          width &gt; maxWidth &amp;&amp; (width &#x3D; maxWidth)</span><br><span class=\"line\">          var rem &#x3D; (width * 10) &#x2F; designWidth</span><br><span class=\"line\">          remStyle.innerHTML &#x3D; &#39;html&#123;font-size:&#39; + rem + &#39;px;&#125;&#39;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">        if (docEl.firstElementChild) &#123;</span><br><span class=\"line\">          docEl.firstElementChild.appendChild(remStyle)</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          var wrap &#x3D; doc.createElement(&#39;div&#39;)</span><br><span class=\"line\">          wrap.appendChild(remStyle)</span><br><span class=\"line\">          doc.write(wrap.innerHTML)</span><br><span class=\"line\">          wrap &#x3D; null</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        &#x2F;&#x2F;要等 wiewport 设置好后才能执行 refreshRem，不然 refreshRem 会执行2次；</span><br><span class=\"line\">        refreshRem()</span><br><span class=\"line\"></span><br><span class=\"line\">        win.addEventListener(</span><br><span class=\"line\">          &#39;resize&#39;,</span><br><span class=\"line\">          function() &#123;</span><br><span class=\"line\">            clearTimeout(tid) &#x2F;&#x2F;防止执行两次</span><br><span class=\"line\">            tid &#x3D; setTimeout(refreshRem, 300)</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          false</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        win.addEventListener(</span><br><span class=\"line\">          &#39;pageshow&#39;,</span><br><span class=\"line\">          function(e) &#123;</span><br><span class=\"line\">            if (e.persisted) &#123;</span><br><span class=\"line\">              &#x2F;&#x2F; 浏览器后退的时候重新计算</span><br><span class=\"line\">              clearTimeout(tid)</span><br><span class=\"line\">              tid &#x3D; setTimeout(refreshRem, 300)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          false</span><br><span class=\"line\">        )</span><br><span class=\"line\"></span><br><span class=\"line\">        if (doc.readyState &#x3D;&#x3D;&#x3D; &#39;complete&#39;) &#123;</span><br><span class=\"line\">          doc.body.style.fontSize &#x3D; &#39;16px&#39;</span><br><span class=\"line\">        &#125; else &#123;</span><br><span class=\"line\">          doc.addEventListener(</span><br><span class=\"line\">            &#39;DOMContentLoaded&#39;,</span><br><span class=\"line\">            function(e) &#123;</span><br><span class=\"line\">              doc.body.style.fontSize &#x3D; &#39;16px&#39;</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">            false</span><br><span class=\"line\">          )</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)(750, 750)</span><br></pre></td></tr></table></figure>\n\n\n\n<hr>\n<p><strong>动态展示图</strong><br><img src=\"https://i.loli.net/2020/02/19/QkD2owRmSeF8bLC.gif\" alt=\"20-02-19-18-35-35.gif\"></p>\n<hr>\n","categories":[],"tags":[{"name":"vue  http-jsonp  HBuilderX","slug":"vue-http-jsonp-HBuilderX","count":1,"path":"api/tags/vue-http-jsonp-HBuilderX.json"}]}