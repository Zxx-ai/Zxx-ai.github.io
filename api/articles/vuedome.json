{"title":"Vue页面刷新问题","slug":"vuedome","date":"2020-02-28T08:35:38.000Z","updated":"2020-02-28T08:35:38.000Z","comments":true,"path":"api/articles/vuedome.json","photos":[],"link":"","excerpt":"Vue刷新页面的三种方式 [Figure] 我们在写项目的时候，经常会遇到，用户执行完某个动作，改变了某些状态，需要重新刷新页面，以此来重新渲染页面。如：用户登录成功、增加、删除、更新等。","covers":["https://i.loli.net/2020/02/28/k5mIujVYBALp1Z3.png"],"content":"<h3 id=\"Vue刷新页面的三种方式\"><a href=\"#Vue刷新页面的三种方式\" class=\"headerlink\" title=\"Vue刷新页面的三种方式\"></a>Vue刷新页面的三种方式</h3><p><img src=\"https://i.loli.net/2020/02/28/k5mIujVYBALp1Z3.png\" alt=\"捕获222.PNG\"></p>\n<p><strong>我们在写项目的时候，经常会遇到，用户执行完某个动作，改变了某些状态，需要重新刷新页面，以此来重新渲染页面。如：用户登录成功、增加、删除、更新等。</strong></p>\n<a id=\"more\"></a>\n\n<p><strong>1.原始的方法（强制刷新）:</strong></p>\n<p><code>location.reload();</code></p>\n<p><strong>2.vue自带的路由跳转：</strong></p>\n<p><code>this.$router.go(0);</code></p>\n<p>用过的人都知道，前两者都是强制刷新页面，会出现短暂的闪烁，用户体验效果不好。<br>所以，我们选择第三种方式：<br><strong>首先在App里面写下如下代码</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"app\"</span>&gt;</span></span><br><span class=\"line\"> <span class=\"tag\">&lt;<span class=\"name\">router-view</span> <span class=\"attr\">v-if</span>=<span class=\"string\">\"isRouterAlive\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">router-view</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">template</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"javascript\">    <span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">        name: <span class=\"string\">'App'</span>,</span></span><br><span class=\"line\"><span class=\"actionscript\">        provide () &#123;    <span class=\"comment\">//父组件中通过provide来提供变量，在子组件中通过inject来注入变量。</span></span></span><br><span class=\"line\"><span class=\"actionscript\">            <span class=\"keyword\">return</span> &#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                reload: <span class=\"keyword\">this</span>.reload</span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        data() &#123;</span><br><span class=\"line\"><span class=\"actionscript\">            <span class=\"keyword\">return</span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                isRouterAlive: <span class=\"literal\">true</span>                    <span class=\"comment\">//控制视图是否显示的变量</span></span></span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        methods: &#123;</span><br><span class=\"line\">            reload () &#123;</span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.isRouterAlive = <span class=\"literal\">false</span>;            <span class=\"comment\">//先关闭，</span></span></span><br><span class=\"line\"><span class=\"actionscript\">                <span class=\"keyword\">this</span>.$nextTick(<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"params\">()</span> </span>&#123;</span></span><br><span class=\"line\"><span class=\"actionscript\">                    <span class=\"keyword\">this</span>.isRouterAlive = <span class=\"literal\">true</span>;         <span class=\"comment\">//再打开</span></span></span><br><span class=\"line\">                &#125;) </span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">        &#125;，</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p>接下来，我们就可以在需要刷新页面的组件里这样写</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> &#123;</span><br><span class=\"line\">    inject:[<span class=\"string\">'reload'</span>],                                 <span class=\"comment\">//注入App里的reload方法</span></span><br><span class=\"line\">    data () &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">             .......</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;,</span><br></pre></td></tr></table></figure>\n<p>在需要刷新页面的代码块中使用：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">this</span>.reload();</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"亲测有效\"><a href=\"#亲测有效\" class=\"headerlink\" title=\"亲测有效\"></a>亲测有效</h3>","categories":[],"tags":[{"name":"vue   html刷新","slug":"vue-html刷新","count":1,"path":"api/tags/vue-html刷新.json"}]}