{"title":"wxnavto","slug":"wxnavto","date":"2020-09-18T17:24:20.000Z","updated":"2020-09-18T17:24:20.000Z","comments":true,"path":"api/articles/wxnavto.json","photos":[],"link":"","excerpt":null,"covers":null,"content":"<p><strong>关于微信小程序图片转bs64</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wx.chooseImage(&#123;</span><br><span class=\"line\">      success: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">res</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(wx.getFileSystemManager().readFileSync(res.tempFilePaths[<span class=\"number\">0</span>], <span class=\"string\">\"base64\"</span>))</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;)</span><br></pre></td></tr></table></figure>\n<p><strong>关于微信小程序从子页面反值到父页面</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pages = getCurrentPages();</span><br><span class=\"line\"><span class=\"keyword\">var</span> prevPage = pages[pages.length - <span class=\"number\">2</span>]; <span class=\"comment\">//上一个页面</span></span><br><span class=\"line\"> <span class=\"comment\">//直接调用上一个页面的setData()方法，把数据存到上一个页面中去</span></span><br><span class=\"line\">   <span class=\"keyword\">let</span> arrlist =  [...new <span class=\"built_in\">Set</span>(erbarr)]</span><br><span class=\"line\">  </span><br><span class=\"line\">prevPage.setData(&#123;</span><br><span class=\"line\">     mydata: &#123;</span><br><span class=\"line\">      id: <span class=\"number\">1</span>,</span><br><span class=\"line\">list: <span class=\"string\">\"子页面数据\"</span></span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;)</span><br><span class=\"line\">   wx.navigateBack(&#123;<span class=\"comment\">//返回</span></span><br><span class=\"line\">     delta: <span class=\"number\">1</span></span><br><span class=\"line\">   &#125;)</span><br></pre></td></tr></table></figure>\n\n\n\n<p><strong>父页面取值，一般写在页面初始化</strong></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> pages = getCurrentPages();</span><br><span class=\"line\"><span class=\"keyword\">var</span> currPage = pages[pages.length - <span class=\"number\">1</span>]; <span class=\"comment\">//当前页面</span></span><br><span class=\"line\"><span class=\"keyword\">let</span> json = currPage.data.mydata;</span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(json)<span class=\"comment\">//为传过来的值</span></span><br></pre></td></tr></table></figure>\n\n","categories":[],"tags":[]}